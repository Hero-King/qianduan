<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ES6可选链操作符</title>
  </head>

  <body>
    <a href="https://es6.ruanyifeng.com/?search=??&x=0&y=0#docs/operator"
      >ES6新增的操作符</a
    >
    <script>
      (function () {
        const obj = {};
        const name = obj && obj.name;
        console.log(name);
      })();

      /**
       * 链判断运算符 
       * ?.运算符，直接在链式调用的时候判断，左侧的对象是否为null或undefined。如果是的，就不再往下运算，而是返回undefined。
a?.b
// 等同于
a == null ? undefined : a.b
a?.[x]
// 等同于
a == null ? undefined : a[x]
a?.b()
// 等同于
a == null ? undefined : a.b()
a?.()
// 等同于
a == null ? undefined : a()
       * 
       **/
      (function () {
        const obj = { name: "wang" };
        const name = obj?.name;
        console.log(name);

        function say() {
          console.log("say run");
        }
        let props = {
          say,
        };
        props?.say();
      })();

      (function () {
        // 运算符左侧的值为null或undefined时 返回右边数据
        const obj = { name: "wang" };
        const name = obj.id ?? 123456;

        // // 或赋值运算符
        // x ||= y
        // // 等同于
        // x || (x = y)

        // // 与赋值运算符
        // x &&= y
        // // 等同于
        // x && (x = y)

        // // Null 赋值运算符 https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing
        // x ??= y
        // // 等同于
        // x ?? (x = y)

        // 判断非空简写
        // old
        let value;
        if (value !== null && value !== undefined && value !== "") {
          //...
        }
        // new
        if ((value ?? "") !== "") {
          //...
        }

        // 非null 非undefined
        let flag;
        if ((flag ?? null) !== null) {
          console.log("非null 非undefined");
        }
      })();
    </script>
  </body>
</html>
